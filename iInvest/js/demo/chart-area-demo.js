// Set new default font family and font color to mimic Bootstrap's default styling
Chart.defaults.global.defaultFontFamily = 'Nunito', '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = '#858796';

function number_format(number, decimals, dec_point, thousands_sep) {
  // *     example: number_format(1234.56, 2, ',', ' ');
  // *     return: '1 234,56'
  number = (number + '').replace(',', '').replace(' ', '');
  var n = !isFinite(+number) ? 0 : +number,
    prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
    sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
    dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
    s = '',
    toFixedFix = function(n, prec) {
      var k = Math.pow(10, prec);
      return '' + Math.round(n * k) / k;
    };
  // Fix for IE parseFloat(0.55).toFixed(0) = 0;
  s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
  if (s[0].length > 3) {
    s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
  }
  if ((s[1] || '').length < prec) {
    s[1] = s[1] || '';
    s[1] += new Array(prec - s[1].length + 1).join('0');
  }
  return s.join(dec);
}

// Area Chart Example
var ctx = document.getElementById("myAreaChart");
var myLineChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    datasets: [{
      label: "Earnings",
      lineTension: 0.3,
      backgroundColor: "rgba(78, 115, 223, 0.05)",
      borderColor: "rgba(78, 115, 223, 1)",
      pointRadius: 3,
      pointBackgroundColor: "rgba(78, 115, 223, 1)",
      pointBorderColor: "rgba(78, 115, 223, 1)",
      pointHoverRadius: 3,
      pointHoverBackgroundColor: "rgba(78, 115, 223, 1)",
      pointHoverBorderColor: "rgba(78, 115, 223, 1)",
      pointHitRadius: 10,
      pointBorderWidth: 2,
      data: [-0.01563843, -0.01023075, -0.04217065, -0.06137832, -0.01235309, 0.0380765, 0.01496699, -0.03991023, 0.005766365, -0.03282245, -0.04065939, 0.03763658, 0.04141846, 0.02364428, -0.0176742, 0.04866283, 0.0008720183999999999, 0.007237114, 0.0010351919999999999, 0.03969118, -0.0153167, 0.03327534, -0.01058055, 0.006988581999999999, 0.02068852, 0.01710026, -0.02648599, 0.02350837, 0.04835544, 0.009834647, -0.04617349, -0.03251339, 0.03406924, 0.02780016, 0.0019951170000000002, 0.003728203, 0.01367279, -0.04681719, 0.01925075, 0.01935808, -0.01257156, 0.001432634, -0.01388744, -0.02802941, -0.0031715909999999996, -0.01791482, -0.009860581, -0.03310592, 0.0, -0.00530136, 0.03913121, 0.0155388, 0.05501619, -0.005207937, 9.730509e-05, 0.01177696, -0.0016382000000000002, -0.01155912, -0.029947900000000003, 0.02341343, -0.02845576, -0.01130892, -0.03091422, -0.0036107820000000003, 0.01352018, -0.02085009, 0.04216497, 0.0108843, 0.01201558, 0.004959751, 0.0, 0.001720694, -0.02046505, 0.01024597, 0.001180537, 0.0, 0.03030868, 0.004910632, -0.0037928420000000003, -0.004311319, 0.0018334739999999999, 0.009624253000000001, -0.01516975, -0.006476138, -0.007857946999999999, 0.0, 0.006367099, 0.01888603, 0.0008057928999999999, -0.0027621729999999997, 0.01383403, -0.0035414929999999997, 0.01840726, -0.01795595, 0.001131167, -0.004063326, -0.004820909, 0.005994665, 0.007867165, 0.01652666, 0.01219565, 0.004641247, -0.002160081, 0.0017147579999999998, -0.01129835, 0.006651997, 0.0027706540000000004, 0.003150705, 0.01478234, 0.003859975, 0.0, 0.003629718, 0.002387732, 0.0077518809999999995, 0.004077926, -0.0051594729999999995, -0.004423059, -0.01066669, 0.01242867, -0.01448444, -0.008125746, -0.01905063, 0.009683881, 0.01231665, 0.0005968805, -0.01079668, 0.01206571, -0.01182249, 0.004357923, 0.01708973, 0.005612837, -0.01851369, -0.009438609, -0.02491572, 0.012173999999999999, 0.00550191, -0.01107826, -0.01446308, -0.0013813870000000002, 0.007997674, 0.01098145, -0.007034933, -0.0138012, -0.005187734, 0.0, -0.0132525, -0.02104273, -0.002002164, 0.02634632, -0.01789157, -0.01158165, 0.01775544, -0.003615018, 0.0018544, -0.005096303, -0.002585683, 0.007271781, 0.01389192, 0.01109896, -0.0001238632, 0.008114554, 0.01404753, -0.01928044, -0.019931900000000002, -0.0239056, -0.003425913, -0.004677084000000001, -0.00298416, 0.005544711999999999, -0.01118846, -0.01789512, -0.02140233, -0.006647264, -0.009915553, -0.007195768000000001, 0.03165852, -0.005599286, 0.006745583, -0.007298509, 0.001536056, 0.0, 0.01880671, -0.03197734, -0.009116268, -0.03018371, -0.0015149010000000001, 0.01372121, 0.028954200000000003, -0.002516967, -0.00199323, -0.01612225, 0.01454421, -0.01493547, 0.01589978, 0.01793742, -0.0116331, 0.01770996, -0.00495481, -0.04509472, 0.008233133, -0.02294069, 0.008738429, 0.02451155, 0.007171319000000001, 0.03479572, 0.0014622270000000002, 0.02788995, 0.0, -0.01438615, -0.01247196, -0.003129537, -0.01925383, 0.01332787, -0.006052111999999999, 0.01933004, 0.004971209, 0.01466934, 0.009519716999999999, 0.0035983729999999998, 0.0008349076, -0.01111, -0.01769068, -0.001747373, 0.02871694, 0.02249497, 0.0029878220000000002, -0.01361813, 0.004506985, -0.02164985, 0.02487827, 0.0038490679999999998, 0.01740803, 0.0002514355, 0.00799485, 0.0005119133, -0.008041481999999999, 0.001290635, -0.0003139619, 0.01073566, -0.001299014, -0.001229317, -0.002253699, 0.002095612, -0.01402001, 0.00621665, -0.001078526, 0.0004127335, -0.006552830999999999, -0.01161643, 0.01048192, 0.0, -0.006080431, -0.003127547, 0.01986017, 0.01997005, -0.005836292, 0.01380873, 0.005511801, 0.01806535, 0.0164239, -0.01129047, -0.009982274000000001, -0.008371257, 0.001327981, 0.00383448, -0.01047847, -0.01349903, -0.011502799999999999, 0.016356700000000002, -0.003630199, 0.005199424, -0.001488731, -0.01466253, 0.01217617, -0.004839080999999999, 0.002164274, 0.005958085, -0.0158627, 0.00961373, -0.006077536999999999, 0.004223263, 0.01792058, 0.01234241, 0.001947132, -0.01654273, -0.005942618, -0.02278629, -0.01018266, 0.009339449, 0.001144173, 0.0, 0.0, -0.002673353, 0.007964214, -0.01587123, 0.007606733, 0.0170035, -0.02886325, -0.018637599999999997, 0.000534459, 0.0008459539, -0.0055684459999999995, -0.0115346, 0.000841437, 0.00514519, 0.02589427, -0.003784209, 0.005213362, 0.0, 0.01316275, -0.0113802, -0.007237716999999999, 0.008984025, 0.0022453489999999998, 0.0001025884, -0.003958896, -0.002242004, 0.01362286, 0.001162799, 0.005322325, -0.001376766, 0.003993310999999999, 0.002401485, -0.01136722, -0.002287825, 0.008445850999999999, 0.02091166, -0.006243536, 0.008092759, -0.009565032, -0.00886505, 0.0, -0.005139145, -0.002630291, -0.01542302, 0.02413276, 0.0, 0.02160174, 0.001722226, 0.01391444, -0.006719845, -0.0043024890000000005, -0.0018412570000000002, 0.009218091, -0.0004093211, -0.0007536906, 0.007259885, 0.00276931, 0.006941770999999999, 0.009123698000000001, 0.0, 0.01132778, -0.004178707, 0.002160996, 0.01011801, -0.002468675, 0.01851301, -0.004039607, -0.0009693039999999999, 0.01079873],
    }],
  },
  options: {
    maintainAspectRatio: false,
    layout: {
      padding: {
        left: 10,
        right: 25,
        top: 25,
        bottom: 0
      }
    },
    scales: {
      xAxes: [{
        time: {
          unit: 'date'
        },
        gridLines: {
          display: false,
          drawBorder: false
        },
        ticks: {
          maxTicksLimit: 7
        }
      }],
      yAxes: [{
        ticks: {
          maxTicksLimit: 5,
          padding: 10,
          // Include a dollar sign in the ticks
          callback: function(value, index, values) {
            return '$' + number_format(value);
          }
        },
        gridLines: {
          color: "rgb(234, 236, 244)",
          zeroLineColor: "rgb(234, 236, 244)",
          drawBorder: false,
          borderDash: [2],
          zeroLineBorderDash: [2]
        }
      }],
    },
    legend: {
      display: false
    },
    tooltips: {
      backgroundColor: "rgb(255,255,255)",
      bodyFontColor: "#858796",
      titleMarginBottom: 10,
      titleFontColor: '#6e707e',
      titleFontSize: 14,
      borderColor: '#dddfeb',
      borderWidth: 1,
      xPadding: 15,
      yPadding: 15,
      displayColors: false,
      intersect: false,
      mode: 'index',
      caretPadding: 10,
      callbacks: {
        label: function(tooltipItem, chart) {
          var datasetLabel = chart.datasets[tooltipItem.datasetIndex].label || '';
          return datasetLabel + ': $' + number_format(tooltipItem.yLabel);
        }
      }
    }
  }
});
